on: [push, pull_request]
name: CI

env:
  BUILD_TYPE: Debug

jobs:
  build:
    runs-on: ${{ matrix.os }}
    continue-on-error: ${{ matrix.experimental }}
    strategy:
      fail-fast: false
      matrix:
        compiler: [g++]
        os: [ubuntu-latest, macos-latest, windows-latest]
        experimental: [false]
    steps:
      - uses: actions/checkout@v2
      - name: Install Dependencies
        shell: bash
        run: |
          echo "Running install dependences for $RUNNER_OS"
          if [ "$RUNNER_OS" == "Linux" ]; then
            echo "installing linux packages"
          elif [ "$RUNNER_OS" == "Windows" ]; then
            echo "installing windows packages"
          elif [ "$RUNNER_OS" == "MacOS" ]; then
            echo "installing macos packages"
          fi
      - name: Build
        shell: bash
        run: |
          mkdir -p build
          cd build
          cmake ..
          cmake --build .
          cd -
      - name: Test
        shell: bash
        run: |
          ls ./build/*
          if [ "$RUNNER_OS" == "Windows" ]; then
            ./build/x64/main
          else
            ./build/main
          fi

# ####################################################
# # BEGIN V0
# ####################################################
# jobs:
#   # ---------------------------------------------
#   # Ubuntu Build/Test
#   # ---------------------------------------------
#   ubuntu-build:
#     runs-on: ubuntu-latest
#     name: Ubuntu $BUILD_TYPE build
#     strategy:
#       matrix:
#         compiler: [g++]
#     steps:
#       - uses: actions/checkout@v2
#       - name: Install Packages
#         run: |
#           sudo apt-get update
#       - name: Build
#         run: |
#           mkdir -p build
#           g++ src/main.cpp -o build/main
#       - name: Test
#         run: ./build/main
#   # ---------------------------------------------
#   # MacOS Build/Test
#   # ---------------------------------------------
#   macos-build:
#     runs-on: macos-latest
#     name: MacOS $BUILD_TYPE build
#     strategy:
#       matrix:
#         compiler: [g++]
#     steps:
#       - uses: actions/checkout@v2
#       - name: Build
#         run: |
#           mkdir -p build
#           g++ src/main.cpp -o build/main
#       - name: Test
#         run: ./build/main
#   # ---------------------------------------------
#   # Windows Build/Test
#   # ---------------------------------------------
#   windows-build:
#     runs-on: windows-latest
#     name: Windows $BUILD_TYPE build
#     strategy:
#       matrix:
#         compiler: [g++]
#     steps:
#       - uses: actions/checkout@v2
#       - name: Build
#         run: |
#           mkdir -p build
#           g++ src/main.cpp -o build/main
#       - name: Test
#         run: ./build/main
# #####################################################
# # END V0
# #####################################################


#         os: [ubuntu-latest, macos-latest]
#         experimental: [false]
#     steps:
#       - uses: actions/checkout@v2
#       - name: Build
#         run: |
#           mkdir -p build
#           g++ src/main.cpp -o build/main


# jobs:
#   build:
#     strategy:
#       matrix:
#         compiler: [g++]

#     runs-on: ubuntu-latest
#     name: Ubuntu $BUILD_TYPE build

#     steps:
#       - uses: actions/checkout@v2
#       - name: Install Packages
#         run: |
#           sudo apt-get update
#       - name: Build
#         run: |
#           mkdir -p build
#           g++ src/main.cpp -o build/main
